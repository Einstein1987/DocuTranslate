<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="DocuTranslate - Traduction de fichiers PDF avec synthÃ¨se vocale">
  <title>DocuTranslate - Traduction PDF</title>
  <link rel="stylesheet" href="styles/styles.css">
</head>
<body>
  <div class="container">
    <!-- Bouton de navigation -->
    <div class="top-right">
      <button id="loadUrlButton" onclick="window.location.href='index.html'" title="Traduire un Google Doc">
        ğŸ“ GDoc
      </button>
    </div>

    <!-- Panneau gauche - Document original -->
    <div class="left-pane">
      <h1 class="app-title">
        <img src="./IMG/logo_docutranslate.png" alt="Logo DocuTranslate">
        <span class="title-text">DocuTranslate</span>
      </h1>
      
      <p class="subtitle">Traduction de fichiers PDF</p>
      
      <!-- Compteur de quota -->
      <div id="quotaDisplay" class="quota-display">
        <span id="quotaText">ğŸ“Š Chargement du quota...</span>
      </div>
      
      <!-- SÃ©lection fichier -->
      <div class="input-group">
        <label for="pdfInput" class="file-label">
          ğŸ“ Choisir un fichier PDF
        </label>
        <input 
          type="file" 
          id="pdfInput" 
          accept="application/pdf"
          aria-label="SÃ©lectionner un fichier PDF"
          style="display: none;"
        >
        <div id="fileName" class="file-name"></div>
      </div>
      
      <!-- SÃ©lection langues et traduction -->
      <div class="translate-section">
        <select id="sourceLanguageSelect" aria-label="Langue source" title="Langue du document original">
          <option value="auto">ğŸ”„ Auto</option>
          <option value="DE">ğŸ‡©ğŸ‡ª Allemand</option>
          <option value="EN">ğŸ‡¬ğŸ‡§ Anglais</option>
          <option value="ES">ğŸ‡ªğŸ‡¸ Espagnol</option>
          <option value="FR">ğŸ‡«ğŸ‡· FranÃ§ais</option>
          <option value="IT">ğŸ‡®ğŸ‡¹ Italien</option>
          <option value="PT">ğŸ‡µğŸ‡¹ Portugais</option>
          <option value="RU">ğŸ‡·ğŸ‡º Russe</option>
          <option value="TR">ğŸ‡¹ğŸ‡· Turc</option>
        </select>
        <span style="font-size: 24px; padding: 0 5px;">â†’</span>
        <select id="targetLanguageSelect" aria-label="Langue cible" title="Langue de traduction souhaitÃ©e">
          <option value="DE">ğŸ‡©ğŸ‡ª Allemand</option>
          <option value="EN">ğŸ‡¬ğŸ‡§ Anglais</option>
          <option value="ES">ğŸ‡ªğŸ‡¸ Espagnol</option>
          <option value="FR">ğŸ‡«ğŸ‡· FranÃ§ais</option>
          <option value="IT">ğŸ‡®ğŸ‡¹ Italien</option>
          <option value="PT-PT">ğŸ‡µğŸ‡¹ Portugais (Europe)</option>
          <option value="PT-BR">ğŸ‡§ğŸ‡· Portugais (BrÃ©sil)</option>
          <option value="RU">ğŸ‡·ğŸ‡º Russe</option>
          <option value="TR">ğŸ‡¹ğŸ‡· Turc</option>
        </select>
        <button onclick="translatePDF()" class="translate-btn">
        ğŸŒ Traduire
      </button>
      </div>
      
      <!-- AperÃ§u du PDF original -->
      <div class="document-container">
        <h3>ğŸ“„ Document original</h3>
        <iframe 
          id="originalDocument" 
          title="Document Original"
          aria-label="AperÃ§u du PDF original"
        ></iframe>
      </div>
    </div>

    <!-- Panneau droit - Traduction -->
    <div class="right-pane">
      <h3>ğŸ“ Traduction</h3>
      
      <div 
        id="translatedText" 
        class="text-container"
        aria-live="polite"
        role="region"
        aria-label="Texte traduit"
      >
        <div class="placeholder">
          <p>ğŸŒ La traduction apparaÃ®tra ici</p>
          <p class="hint">SÃ©lectionnez un PDF et cliquez sur "Traduire"</p>
        </div>
      </div>
      
      <!-- Boutons d'action -->
      <div class="centre" style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-top: 15px;">
        <button onclick="readTranslatedText()" class="voice-btn" style="flex: 1; min-width: 200px;">
          ğŸ”Š Ã‰couter
        </button>
        <button onclick="copyTranslation()" class="voice-btn" style="flex: 1; min-width: 200px; background: linear-gradient(135deg, #9b59b6, #8e44ad);">
          ğŸ“‹ Copier
        </button>
        <button onclick="downloadTranslation()" class="voice-btn" style="flex: 1; min-width: 200px; background: linear-gradient(135deg, #16a085, #138d75);">
          ğŸ’¾ TÃ©lÃ©charger
        </button>
      </div>
      
      <!-- Informations -->
      <div class="info-box">
        <p><strong>ğŸ’¡ Astuces :</strong></p>
        <ul>
          <li>ğŸ“„ Fichier PDF maximum 10 MB</li>
          <li>ğŸ”Š Bouton "Ã‰couter" pour la synthÃ¨se vocale</li>
          <li>ğŸ“‹ "Copier" pour coller ailleurs</li>
          <li>ğŸ’¾ "TÃ©lÃ©charger" sauvegarde en .txt</li>
          <li>ğŸŒ SÃ©lectionnez la langue source pour plus de prÃ©cision</li>
        </ul>
        <p style="margin-top: 10px; padding: 8px; background: #fff3cd; border-radius: 5px; color: #856404; font-weight: bold; text-align: center; border: 1px solid #ffeaa7;">
          âš ï¸ API MyMemory : Limite de 10 000 mots/jour
        </p>
        <p style="margin-top: 5px; font-size: 12px; color: #666; text-align: center;">
          Pour un usage intensif professionnel, utilisez l'API DeepL (payante mais illimitÃ©e)
        </p>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>
  <script src="scripts/docutranslate.js"></script>
  
  <script>
    // Afficher le nom du fichier sÃ©lectionnÃ©
    document.getElementById('pdfInput').addEventListener('change', function(e) {
      const fileName = e.target.files[0]?.name || '';
      const fileNameDiv = document.getElementById('fileName');
      if (fileName) {
        fileNameDiv.textContent = `ğŸ“„ ${fileName}`;
        fileNameDiv.style.display = 'block';
      } else {
        fileNameDiv.style.display = 'none';
      }
    });
    
    // DÃ©clencher le sÃ©lecteur de fichier
    document.querySelector('.file-label').addEventListener('click', function() {
      document.getElementById('pdfInput').click();
    });
  </script>
</body>
</html>
